import{f as b,a as I}from"./BmDDdK99.js";import{o as le}from"./CFbETh-D.js";import{au as ce,F as q,e as ve,av as fe,L as me,aw as ge,ax as _e,ad as pe,c as g,r as c,s as u,t as R,ay as he,g as t,p as ye,_ as k,$ as Ie,f as be,a as Se,i as m,d as F}from"./Dt8JWdLj.js";import{s as A}from"./B_BrIYOF.js";import{i as C}from"./lZKtVI2E.js";import{e as xe}from"./BnEZ5wFl.js";import{S as De}from"./BlQvu5Ac.js";import{s as D,h as Q,j as Y,k as Z,d as $,n as Te,l as we,N as ee,D as te,R as re,r as Oe}from"./DqnKDbw3.js";import{I as Ne,a as L,V as ke,C as Ce,D as Pe}from"./q3upTdq-.js";import{D as Re}from"./DUQU4s53.js";import{g as P}from"./uFdBFIge.js";import{g as Me}from"./lS7OVoRp.js";import{g as Be,c as Ee,u as qe,d as Fe}from"./loPJJlYk.js";import"./BQwqAryc.js";import{e as Le,i as Ue}from"./_TtzGgkB.js";import{s as Ae}from"./Dpoel4qD.js";import{p as T}from"./COWmcmHA.js";import{p as ae}from"./DBKmiA9n.js";function ie(a,e,r=!1){if(a.multiple){if(e==null)return;if(!me(e))return ge();for(var n of a.options)n.selected=e.includes(w(n));return}for(n of a.options){var d=w(n);if(_e(d,e)){n.selected=!0;return}}(!r||e!==void 0)&&(a.selectedIndex=-1)}function je(a){var e=new MutationObserver(()=>{ie(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),pe(()=>{e.disconnect()})}function Ve(a,e,r=e){var n=new WeakSet,d=!0;ce(a,"change",s=>{var _=s?"[selected]":":checked",l;if(a.multiple)l=[].map.call(a.querySelectorAll(_),w);else{var v=a.querySelector(_)??a.querySelector("option:not([disabled])");l=v&&w(v)}r(l),q!==null&&n.add(q)}),ve(()=>{var s=e();if(a===document.activeElement){var _=fe??q;if(n.has(_))return}if(ie(a,s,d),d&&s===void 0){var l=a.querySelector(":checked");l!==null&&(s=w(l),r(s))}a.__value=s,d=!1}),je(a)}function w(a){return"__value"in a?a.__value:a.value}var We=b("<option> </option>"),Ge=b('<div class="mb-5"><label class="block mb-2 text-base sm:text-lg font-medium dark:text-white"> </label> <select></select></div>');function U(a,e){let r=T(e,"title",8),n=T(e,"optionSelected",12,""),d=T(e,"options",24,()=>[]),s=T(e,"errorShouldDisplay",8,!1),_=T(e,"styleOverride",8,"");var l=Ge(),v=g(l),O=g(v,!0);c(v);var p=u(v,2);R(()=>{n(),he(()=>{r(),s(),_(),d()})}),Le(p,5,d,Ue,(N,S,M)=>{var y=We();D(y,"id",M+"");var i=g(y,!0);c(y);var f={};R(()=>{A(i,t(S)),f!==(f=t(S))&&(y.value=(y.__value=t(S))??"")}),I(N,y)}),c(p),c(l),R(()=>{D(v,"for",`switch-${r()}`),A(O,r()),D(p,"name",`${r()}selectedOption`),D(p,"id",`switch-${r()}`),Ae(p,1,`block p-2.5 w-full text-base text-gray-900 bg-gray-50 rounded-lg border 
            border-slate-400 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 
            dark:text-white ${s()?"bg-red-200 dark:bg-red-800":""}  
            ${_()}`),D(p,"aria-invalid",s())}),Ve(p,n),I(a,l)}var Xe=b('<div class=" md:gap-28 w-40 min-h-8 mb-8 md:mb-4"><!></div>'),ze=b('<div class="flex items-center flex-col pb-4"><div class="mb-6 text-4xl text-center mb-16 dark:text-white"> </div> <form class="mx-auto w-3/4"><!> <!> <!> <div class="flex gap-4"><!> <!></div> <!> <!> <!> <div class="grid md:grid-cols-2 md:gap-28 gap-4 mt-4 mx-auto md:w-80 min-h-14"><!> <!></div></form></div>'),He=b('<div class="flex justify-center"><!></div>'),Je=b("<!> <!> <!>",1);function ft(a,e){ye(e,!0);let r=k(Ie({name:"",description:"",price:0,currency:Z[0],imageUrl:"",category:Y[0],inventoryStatus:Q[0],id:-1,storeId:-1})),n=k("0"),d=k(!0),s=k(void 0);le(()=>{e.productId!==void 0&&e.storeId!==void 0?(m(d,!0),Be(+e.storeId,+e.productId).then(i=>{m(r,i.product,!0),m(n,t(r).price+""),m(s,i.store,!0),ae.set({inStores:!0,inProducts:!0,storeName:i.store.name,storeId:i.store.id+"",productName:t(r).name,productId:t(r).id+""})}).catch(()=>{console.error("Error loading something")}).finally(()=>{m(d,!1)})):Me(+e.storeId).then(i=>{m(s,i,!0),ae.set({inStores:!0,inProducts:!0,storeName:t(s).name,storeId:t(s).id+"",productName:void 0,productId:void 0})}).catch(()=>{console.error("Error loading store"),m(r,void 0)}).finally(()=>{m(d,!1)}),m(d,!1)});let _=i=>{i.preventDefault(),t(r)!==void 0&&t(r).name.length<=ee&&t(r).description.length<=te&&re.NUMBERS_DOTS_COMMAS.test(t(n))&&(t(r).price=+Oe(t(n)),e.productId===void 0&&e.storeId!==void 0&&Ee(+e.storeId,t(r)).then(()=>{P(`/stores/${e.storeId}/products/`)}).catch(()=>alert("error when creating")),e.productId!==void 0&&e.storeId!==void 0&&qe(+e.storeId,+e.productId,t(r)).then(()=>{P(`/stores/${e.storeId}/products/`)}).catch(()=>alert("error when updating")))},l=()=>{e.productId!==void 0&&e.storeId&&Fe(+e.storeId,+e.productId).then(()=>{P(`/stores/${+e.storeId}/products/`)}).catch(()=>alert("error when delete"))};var v=Je(),O=be(v);{var p=i=>{var f=ze(),x=g(f),oe=g(x,!0);c(x);var B=u(x,2),j=g(B);Ne(j,{title:"URL",errorShouldDisplay:!1,required:!1,get helpText(){return $},get value(){return t(r).imageUrl},set value(o){t(r).imageUrl=o}});var V=u(j,2);{let o=F(()=>t(r).name.length>ee);L(V,{numberOfLines:1,title:"Name",get errorShouldDisplay(){return t(o)},required:!0,get helpText(){return Te},get value(){return t(r).name},set value(h){t(r).name=h}})}var W=u(V,2);{let o=F(()=>t(r).description.length>te);L(W,{numberOfLines:4,title:"Description",get errorShouldDisplay(){return t(o)},required:!0,get helpText(){return $},get value(){return t(r).description},set value(h){t(r).description=h}})}var E=u(W,2),G=g(E);{let o=F(()=>!re.NUMBERS_DOTS_COMMAS.test(t(n)));L(G,{numberOfLines:1,title:"Price",get errorShouldDisplay(){return t(o)},required:!0,get helpText(){return we},get value(){return t(n)},set value(h){m(n,h,!0)}})}var ne=u(G,2);U(ne,{title:"Currency",get options(){return Z},get optionSelected(){return t(r).currency},set optionSelected(o){t(r).currency=o}}),c(E);var X=u(E,2);U(X,{title:"Category",get options(){return Y},get optionSelected(){return t(r).category},set optionSelected(o){t(r).category=o}});var z=u(X,2);U(z,{title:"Inventory status",get options(){return Q},get optionSelected(){return t(r).inventoryStatus},set optionSelected(o){t(r).inventoryStatus=o}});var H=u(z,2);{var de=o=>{var h=Xe(),ue=g(h);Pe(ue,{functionToDo:()=>l(),title:"Delete Product"}),c(h),I(o,h)};C(H,o=>{e.productId!==void 0&&o(de)})}var J=u(H,2),K=g(J);ke(K,{functionToDo:()=>{},title:"Submit"});var se=u(K,2);Ce(se,{functionToDo:()=>{P(`/stores/${e.storeId}/products/`)},title:"Cancel"}),c(J),c(B),c(f),R(()=>A(oe,e.title)),xe("submit",B,o=>_(o)),I(i,f)};C(O,i=>{!t(d)&&t(r)&&i(p)})}var N=u(O,2);{var S=i=>{Re(i)};C(N,i=>{!t(d)&&!t(r)&&i(S)})}var M=u(N,2);{var y=i=>{var f=He(),x=g(f);De(x),c(f),I(i,f)};C(M,i=>{t(d)&&i(y)})}I(a,v),Se()}export{ft as P};
