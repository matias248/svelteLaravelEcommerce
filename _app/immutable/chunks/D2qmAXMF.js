import{f as y,a as _}from"./BmDDdK99.js";import{o as se}from"./CFbETh-D.js";import{p as ie,_ as S,$ as ne,f as oe,a as le,s,i as l,g as e,c as i,r as n,d as m,t as ue}from"./Dt8JWdLj.js";import{s as me}from"./B_BrIYOF.js";import{i as N}from"./lZKtVI2E.js";import{e as ve}from"./BnEZ5wFl.js";import{S as fe}from"./BlQvu5Ac.js";import{d as k,n as x,o as ge,N as o,D as V,R as b}from"./DqnKDbw3.js";import{I as ce,a as v,V as pe,C as he,D as _e}from"./q3upTdq-.js";import{D as Se}from"./DUQU4s53.js";import{g as D}from"./DlzR5_pz.js";import{g as Ne,c as xe,u as be,d as De}from"./lS7OVoRp.js";import{p as E}from"./DBKmiA9n.js";var ye=y('<div class=" md:gap-28 w-40 min-h-8 mb-8 md:mb-4"><!></div>'),Ie=y('<div class="flex items-center flex-col pb-4"><div class="mb-6 text-4xl text-center mb-16 dark:text-white"> </div> <form class="mx-auto w-3/4"><!> <div class="flex gap-4"><!> <!></div> <div class="flex gap-4"><!></div> <div class="flex gap-4"><!> <!></div> <!> <div class="flex gap-4"><!> <!></div> <!> <div class="grid md:grid-cols-2 md:gap-28 gap-4 mt-4 mx-auto md:w-80 min-h-14"><!> <!></div></form></div>'),Te=y('<div class="flex justify-center"><!></div>'),Le=y("<!> <!> <!>",1);function Ge(j,u){ie(u,!0);let t=S(ne({id:-1,name:"",contactPhone:"0",imageUrl:"",address:{state:"",streetNumber:"",streetName:"",city:"",zipCode:""},location:{latitude:0,longitude:0}})),g=S("0"),c=S("0"),p=S(!0);se(()=>{u.id!==void 0?(l(p,!0),Ne(+u.id).then(d=>{l(t,d,!0),l(g,e(t).location.latitude+""),l(c,e(t).location.longitude+""),E.set({inStores:!0,inProducts:!1,storeName:e(t).name,storeId:e(t).id+"",productName:void 0,productId:void 0})}).catch(()=>{console.error("Error loading store"),E.set({inStores:!0,inProducts:!1,storeName:void 0,storeId:void 0,productName:void 0,productId:void 0}),l(t,void 0)}).finally(()=>{l(p,!1)})):(E.set({inStores:!0,inProducts:!1,storeName:void 0,storeId:void 0,productName:void 0,productId:void 0}),l(p,!1))});let X=d=>{d.preventDefault(),e(t)!==void 0&&e(t).name.length<=o&&e(t).address.city.length<=o&&e(t).address.state.length<=o&&e(t).address.zipCode.length<=o&&e(t).address.streetNumber.length<=o&&e(t).address.streetName.length<=V&&b.LATITUDE.test(e(g))&&b.LONGITUDE.test(e(c))&&(e(t).location.longitude=+e(c),e(t).location.latitude=+e(g),u.id===void 0?xe(e(t)).then(()=>{D("/stores")}).catch(()=>alert("error when creating")):be(e(t).id,e(t)).then(()=>{D("/stores")}).catch(()=>alert("error when updating")))},Z=()=>{u.id!==void 0&&De(+u.id).then(()=>{D("/stores")}).catch(()=>alert("error when delete"))};var R=Le(),q=oe(R);{var H=d=>{var f=Ie(),h=i(f),W=i(h,!0);n(h);var I=s(h,2),B=i(I);ce(B,{title:"URL",errorShouldDisplay:!1,required:!1,get helpText(){return k},get value(){return e(t).imageUrl},set value(r){e(t).imageUrl=r}});var T=s(B,2),w=i(T);{let r=m(()=>e(t).name.length>o);v(w,{numberOfLines:1,title:"Name",get errorShouldDisplay(){return e(r)},required:!0,get helpText(){return x},get value(){return e(t).name},set value(a){e(t).name=a}})}var Y=s(w,2);{let r=m(()=>e(t).address.city.length>o);v(Y,{numberOfLines:1,title:"City",get errorShouldDisplay(){return e(r)},required:!0,get helpText(){return x},get value(){return e(t).address.city},set value(a){e(t).address.city=a}})}n(T);var L=s(T,2),$=i(L);{let r=m(()=>e(t).address.state.length>o);v($,{numberOfLines:1,title:"State",get errorShouldDisplay(){return e(r)},required:!0,get helpText(){return x},get value(){return e(t).address.state},set value(a){e(t).address.state=a}})}n(L);var O=s(L,2),z=i(O);{let r=m(()=>e(t).address.zipCode.length>o);v(z,{numberOfLines:1,title:"Zipcode",required:!0,get errorShouldDisplay(){return e(r)},get helpText(){return x},get value(){return e(t).address.zipCode},set value(a){e(t).address.zipCode=a}})}var ee=s(z,2);{let r=m(()=>e(t).address.streetNumber.length>o);v(ee,{numberOfLines:1,required:!0,title:"Street Number",get errorShouldDisplay(){return e(r)},get helpText(){return ge},get value(){return e(t).address.streetNumber},set value(a){e(t).address.streetNumber=a}})}n(O);var M=s(O,2);{let r=m(()=>e(t).address.streetName.length>V);v(M,{numberOfLines:1,title:"Street Name",required:!0,get errorShouldDisplay(){return e(r)},get helpText(){return k},get value(){return e(t).address.streetName},set value(a){e(t).address.streetName=a}})}var C=s(M,2),P=i(C);{let r=m(()=>!b.LATITUDE.test(e(g)));v(P,{numberOfLines:1,title:"Latitude",required:!0,get errorShouldDisplay(){return e(r)},helpText:void 0,get value(){return e(g)},set value(a){l(g,a,!0)}})}var te=s(P,2);{let r=m(()=>!b.LONGITUDE.test(e(c)));v(te,{numberOfLines:1,title:"Longitude",required:!0,get errorShouldDisplay(){return e(r)},helpText:void 0,get value(){return e(c)},set value(a){l(c,a,!0)}})}n(C);var F=s(C,2);{var re=r=>{var a=ye(),de=i(a);_e(de,{functionToDo:()=>Z(),title:"Delete Store"}),n(a),_(r,a)};N(F,r=>{u.id!==void 0&&r(re)})}var A=s(F,2),G=i(A);pe(G,{functionToDo:()=>{},title:"Submit"});var ae=s(G,2);he(ae,{functionToDo:()=>{D("/stores/")},title:"Cancel"}),n(A),n(I),n(f),ue(()=>me(W,u.title)),ve("submit",I,r=>X(r)),_(d,f)};N(q,d=>{!e(p)&&e(t)&&d(H)})}var U=s(q,2);{var J=d=>{Se(d)};N(U,d=>{!e(p)&&!e(t)&&d(J)})}var K=s(U,2);{var Q=d=>{var f=Te(),h=i(f);fe(h),n(f),_(d,f)};N(K,d=>{e(p)&&d(Q)})}_(j,R),le()}export{Ge as S};
